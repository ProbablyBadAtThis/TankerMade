<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TankerMade Workbench - Development Tracker</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #64748b;
            --bg-color: #ffffff;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
            --code-bg: #f1f5f9;
            --hover-color: #f8fafc;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: var(--primary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .overall-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .progress-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(var(--success-color) 0deg, var(--success-color) 0deg, rgba(255,255,255,0.3) 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        main {
            padding: 2rem 0;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 2rem;
            font-size: 2.5rem;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }
        
        .phases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .phase-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }
        
        .phase-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-color: var(--primary-color);
        }
        
        .phase-card.completed {
            border-color: var(--success-color);
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }
        
        .phase-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .phase-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .phase-card.completed .phase-number {
            background: var(--success-color);
        }
        
        .phase-info {
            flex: 1;
        }
        
        .phase-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0;
        }
        
        .phase-duration {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }
        
        .phase-progress {
            margin: 1rem 0;
        }
        
        .progress-bar {
            background: var(--border-color);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            background: var(--success-color);
            height: 100%;
            transition: width 0.3s;
            border-radius: 4px;
        }
        
        .progress-text {
            font-size: 0.85rem;
            color: var(--secondary-color);
            display: flex;
            justify-content: space-between;
        }
        
        .phase-summary {
            font-size: 0.9rem;
            color: var(--secondary-color);
            line-height: 1.5;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            background: white;
            color: var(--primary-color);
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .btn.danger {
            border-color: var(--error-color);
            color: var(--error-color);
        }
        
        .btn.danger:hover {
            background: var(--error-color);
            color: white;
        }
        
        .milestone-tracker {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .milestone-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .milestone-header h2 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .week-tracker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 1rem;
        }
        
        .week-item {
            text-align: center;
            padding: 1rem;
            border-radius: 8px;
            background: white;
            border: 2px solid var(--border-color);
            transition: all 0.2s;
        }
        
        .week-item.completed {
            border-color: var(--success-color);
            background: #f0fdf4;
        }
        
        .week-item.current {
            border-color: var(--warning-color);
            background: #fefce8;
        }
        
        .week-number {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        
        .week-label {
            font-size: 0.8rem;
            color: var(--secondary-color);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .phases-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .week-tracker {
                grid-template-columns: repeat(7, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">🧶 TankerMade Dev Tracker</div>
                <div class="overall-progress">
                    <div>
                        <div style="font-size: 0.9rem; margin-bottom: 0.25rem;" id="overall-progress-text">0% Complete</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;" id="current-week-text">Week 1 of 21</div>
                    </div>
                    <div class="progress-circle" id="progress-circle">0%</div>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <div class="container">
            <h1>Development Progress Dashboard</h1>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="completed-tasks">0</div>
                    <div class="stat-label">Tasks Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-tasks">0</div>
                    <div class="stat-label">Total Tasks</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-phases">0</div>
                    <div class="stat-label">Phases Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="current-phase-progress">0%</div>
                    <div class="stat-label">Current Phase</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="exportProgress()">📁 Export Progress</button>
                <button class="btn" onclick="importProgress()">📂 Import Progress</button>
                <button class="btn danger" onclick="resetAllProgress()">🔄 Reset All Progress</button>
            </div>

            <div class="milestone-tracker">
                <div class="milestone-header">
                    <h2>21-Week Timeline</h2>
                    <p>Track your progress through the complete development roadmap</p>
                </div>
                <div class="week-tracker" id="week-tracker">
                    <!-- Weeks will be generated by JavaScript -->
                </div>
            </div>

            <div class="phases-grid" id="phases-container">
                <!-- Phase cards will be generated by JavaScript -->
            </div>
        </div>
    </main>

    <script>
        // Phase configuration with task counts for accurate progress tracking
        const phases = [
            {
                id: 1,
                title: "Foundation",
                duration: "Weeks 1-3",
                weeks: [1, 2, 3],
                summary: "Basic infrastructure, authentication, and project CRUD in both offline and server modes.",
                taskCount: 23, // Will be calculated from actual phase-1.html tasks
                color: "#2563eb"
            },
            {
                id: 2,
                title: "Core Features", 
                duration: "Weeks 4-6",
                weeks: [4, 5, 6],
                summary: "Complete CRUD for all entities, wizards, reference data, and inventory management.",
                taskCount: 31,
                color: "#059669"
            },
            {
                id: 3,
                title: "Pattern Details & Project Workspace",
                duration: "Weeks 7-8", 
                weeks: [7, 8],
                summary: "Rich pattern editing, step checklists, and interactive project workspace.",
                taskCount: 18,
                color: "#7c3aed"
            },
            {
                id: 4,
                title: "Timers & Sessions",
                duration: "Weeks 9-10",
                weeks: [9, 10], 
                summary: "Time tracking with persistent timers, session history, and statistics.",
                taskCount: 15,
                color: "#dc2626"
            },
            {
                id: 5,
                title: "Gamification",
                duration: "Weeks 11-13",
                weeks: [11, 12, 13],
                summary: "XP system, achievements, streaks, and gamification dashboard.",
                taskCount: 25,
                color: "#ea580c"
            },
            {
                id: 6,
                title: "Theme & Settings",
                duration: "Week 14",
                weeks: [14],
                summary: "Dark/light themes, settings management, and reference data CRUD.",
                taskCount: 12,
                color: "#0891b2"
            },
            {
                id: 7,
                title: "Admin & Operations", 
                duration: "Week 15",
                weeks: [15],
                summary: "Export/import, user management, and data integrity tools.",
                taskCount: 14,
                color: "#65a30d"
            },
            {
                id: 8,
                title: "Module System",
                duration: "Weeks 16-17",
                weeks: [16, 17],
                summary: "Extensible module system with Crochet module implementation.",
                taskCount: 19,
                color: "#c026d3"
            },
            {
                id: 9,
                title: "Search & Performance",
                duration: "Weeks 18-19", 
                weeks: [18, 19],
                summary: "Full-text search, pagination, database optimization, and performance tuning.",
                taskCount: 17,
                color: "#e11d48"
            },
            {
                id: 10,
                title: "Polish & Testing",
                duration: "Weeks 20-21",
                weeks: [20, 21], 
                summary: "Comprehensive testing, accessibility, documentation, and production readiness.",
                taskCount: 22,
                color: "#0d9488"
            }
        ];

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            generateWeekTracker();
            generatePhaseCards();
            updateAllProgress();
        });

        function generateWeekTracker() {
            const container = document.getElementById('week-tracker');
            for (let week = 1; week <= 21; week++) {
                const weekElement = document.createElement('div');
                weekElement.className = 'week-item';
                weekElement.innerHTML = `
                    <div class="week-number">W${week}</div>
                    <div class="week-label">Week ${week}</div>
                `;
                container.appendChild(weekElement);
            }
        }

        function generatePhaseCards() {
            const container = document.getElementById('phases-container');
            phases.forEach(phase => {
                const phaseElement = document.createElement('a');
                phaseElement.href = `phase-${phase.id}.html`;
                phaseElement.className = 'phase-card';
                phaseElement.innerHTML = `
                    <div class="phase-header">
                        <div class="phase-number" style="background: ${phase.color};">${phase.id}</div>
                        <div class="phase-info">
                            <h3 class="phase-title">${phase.title}</h3>
                            <div class="phase-duration">${phase.duration}</div>
                        </div>
                    </div>
                    <div class="phase-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="phase-${phase.id}-progress" style="width: 0%; background: ${phase.color};"></div>
                        </div>
                        <div class="progress-text">
                            <span id="phase-${phase.id}-text">0 / ${phase.taskCount} tasks</span>
                            <span id="phase-${phase.id}-percent">0%</span>
                        </div>
                    </div>
                    <div class="phase-summary">${phase.summary}</div>
                `;
                container.appendChild(phaseElement);
            });
        }

        function updateAllProgress() {
            let totalTasks = 0;
            let totalCompleted = 0;
            let phasesCompleted = 0;

            phases.forEach(phase => {
                const phaseData = getPhaseProgress(phase.id);
                const completed = phaseData.completed;
                const total = phaseData.total || phase.taskCount;
                const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;

                // Update phase card
                const progressBar = document.getElementById(`phase-${phase.id}-progress`);
                const progressText = document.getElementById(`phase-${phase.id}-text`);
                const progressPercent = document.getElementById(`phase-${phase.id}-percent`);
                
                if (progressBar) progressBar.style.width = percentage + '%';
                if (progressText) progressText.textContent = `${completed} / ${total} tasks`;
                if (progressPercent) progressPercent.textContent = percentage + '%';

                // Mark phase as completed if 100%
                const phaseCard = document.querySelector(`a[href="phase-${phase.id}.html"]`);
                if (percentage === 100) {
                    phaseCard.classList.add('completed');
                    phasesCompleted++;
                }

                totalTasks += total;
                totalCompleted += completed;
            });

            // Update overall stats
            const overallPercentage = totalTasks > 0 ? Math.round((totalCompleted / totalTasks) * 100) : 0;
            
            document.getElementById('completed-tasks').textContent = totalCompleted;
            document.getElementById('total-tasks').textContent = totalTasks;
            document.getElementById('completed-phases').textContent = phasesCompleted;
            document.getElementById('overall-progress-text').textContent = overallPercentage + '% Complete';
            
            // Update progress circle
            const circle = document.getElementById('progress-circle');
            circle.textContent = overallPercentage + '%';
            const degrees = (overallPercentage / 100) * 360;
            circle.style.background = `conic-gradient(var(--success-color) 0deg, var(--success-color) ${degrees}deg, rgba(255,255,255,0.3) ${degrees}deg)`;

            // Update current phase progress
            const currentPhase = getCurrentPhase();
            if (currentPhase) {
                const currentPhaseData = getPhaseProgress(currentPhase.id);
                const currentPercentage = currentPhaseData.total > 0 ? 
                    Math.round((currentPhaseData.completed / currentPhaseData.total) * 100) : 0;
                document.getElementById('current-phase-progress').textContent = currentPercentage + '%';
            }

            // Update week tracker
            updateWeekTracker();
        }

        function getCurrentPhase() {
            // Find first incomplete phase
            for (const phase of phases) {
                const phaseData = getPhaseProgress(phase.id);
                const percentage = phaseData.total > 0 ? (phaseData.completed / phaseData.total) * 100 : 0;
                if (percentage < 100) {
                    return phase;
                }
            }
            return phases[phases.length - 1]; // Last phase if all complete
        }

        function updateWeekTracker() {
            const currentPhase = getCurrentPhase();
            const weekItems = document.querySelectorAll('.week-item');
            
            weekItems.forEach((item, index) => {
                const week = index + 1;
                item.classList.remove('completed', 'current');
                
                // Mark completed weeks
                let isCompleted = false;
                for (const phase of phases) {
                    if (phase.weeks.includes(week)) {
                        const phaseData = getPhaseProgress(phase.id);
                        const percentage = phaseData.total > 0 ? (phaseData.completed / phaseData.total) * 100 : 0;
                        if (percentage === 100) {
                            isCompleted = true;
                        }
                        break;
                    }
                }
                
                if (isCompleted) {
                    item.classList.add('completed');
                } else if (currentPhase && currentPhase.weeks.includes(week)) {
                    item.classList.add('current');
                }
            });

            // Update current week text
            if (currentPhase && currentPhase.weeks.length > 0) {
                document.getElementById('current-week-text').textContent = 
                    `Week ${currentPhase.weeks[0]} of 21`;
            }
        }

        function getPhaseProgress(phaseId) {
            const key = `phase-${phaseId}-progress`;
            const saved = localStorage.getItem(key);
            if (saved) {
                return JSON.parse(saved);
            }
            return { completed: 0, total: phases.find(p => p.id === phaseId)?.taskCount || 0 };
        }

        function exportProgress() {
            const allData = {};
            phases.forEach(phase => {
                const key = `phase-${phase.id}-progress`;
                const data = localStorage.getItem(key);
                if (data) {
                    allData[key] = JSON.parse(data);
                }
            });

            const blob = new Blob([JSON.stringify(allData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `tankermade-dev-progress-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function importProgress() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            Object.keys(data).forEach(key => {
                                localStorage.setItem(key, JSON.stringify(data[key]));
                            });
                            updateAllProgress();
                            alert('Progress imported successfully!');
                        } catch (error) {
                            alert('Error importing progress: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function resetAllProgress() {
            if (confirm('Are you sure you want to reset ALL progress? This cannot be undone.')) {
                phases.forEach(phase => {
                    localStorage.removeItem(`phase-${phase.id}-progress`);
                    localStorage.removeItem(`phase-${phase.id}-tasks`);
                });
                updateAllProgress();
                alert('All progress has been reset.');
            }
        }

        // Update progress every time page loads
        setInterval(updateAllProgress, 5000); // Update every 5 seconds to catch changes from phase pages
    </script>
</body>
</html>
