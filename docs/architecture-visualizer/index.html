<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>TankerMade Architecture Visualizer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet" />
    <link href="styles/diagram.css" rel="stylesheet" />
    <script src="https://unpkg.com/gojs/release/go.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header matching your Documentation site exactly -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <span class="header-icon">🏗️</span>
                    <h1>TankerMade Architecture Visualizer</h1>
                </div>
                <div class="header-right">
                    <span class="header-subtitle">Visual System Reference</span>
                </div>
            </div>
        </header>

        <!-- Navigation matching your Documentation site exactly -->
        <nav class="main-nav">
            <button class="nav-item active" data-tab="overview">Overview</button>
            <button class="nav-item" data-tab="dto-flow">DTO Flow</button>
            <button class="nav-item" data-tab="services">Services</button>
            <button class="nav-item" data-tab="data-dictionary">Data Dictionary</button>
        </nav>

        <!-- Main content with white background like Documentation -->
        <main class="main-content">
            <div id="overview" class="tab-pane active">
                <!-- Blue title bar like Documentation site -->
                <div class="page-header">
                    <h1>TankerMade Architecture Visualizer</h1>
                    <div class="page-underline"></div>
                </div>

                <!-- Executive summary with yellow background like Documentation -->
                <div class="executive-summary">
                    <h2>🎯 Executive Summary</h2>
                    <p><strong>TankerMade Architecture Visualizer</strong> provides visual representation of your Clean Architecture implementation, showing how DTOs, Services, and Entities interact within the TankerMade system with interactive diagrams and comprehensive field references.</p>
                </div>

                <!-- Two-column layout like Documentation -->
                <div class="content-grid">
                    <div class="content-card">
                        <h2>🏗️ Architecture</h2>
                        <p><strong>Stack:</strong> Clean Architecture + Service Layer + DTOs</p>
                        <ul class="feature-list">
                            <li>Separation of concerns</li>
                            <li>Interface-based design</li>
                            <li>Security by design</li>
                            <li>Role-based access control</li>
                        </ul>
                    </div>

                    <div class="content-card">
                        <h2>⚙️ Core Philosophy</h2>
                        <ul class="philosophy-list">
                            <li><strong>Clean Architecture:</strong> Dependency inversion and layer isolation</li>
                            <li><strong>Security First:</strong> Role protection and field-level access control</li>
                            <li><strong>Visual Clarity:</strong> Interactive diagrams for system understanding</li>
                            <li><strong>Documentation:</strong> Complete field reference and data dictionary</li>
                        </ul>
                    </div>
                </div>

                <!-- Navigation section -->
                <div class="section-header">
                    <h2>📋 Quick Navigation</h2>
                </div>

                <div class="nav-cards">
                    <button class="quick-nav-item" data-tab="dto-flow">
                        <span class="quick-nav-title">DTO Flow</span> - Interactive mapping of data transfer objects
                    </button>
                    <button class="quick-nav-item" data-tab="services">
                        <span class="quick-nav-title">Services</span> - Business logic layer and data flow diagrams
                    </button>
                    <button class="quick-nav-item" data-tab="data-dictionary">
                        <span class="quick-nav-title">Data Dictionary</span> - Complete field definitions and security policies
                    </button>
                </div>
            </div>

            <div id="dto-flow" class="tab-pane">
                <div class="page-header">
                    <h1>🔄 DTO Relationships</h1>
                    <div class="page-underline"></div>
                </div>
                <p class="page-description">Interactive diagram showing how Data Transfer Objects connect across your domain entities.</p>
                <div id="dtoDiagram" class="diagram-canvas"></div>
            </div>

            <div id="services" class="tab-pane">
                <div class="page-header">
                    <h1>⚙️ Service Architecture</h1>
                    <div class="page-underline"></div>
                </div>
                <p class="page-description">Business logic layer and complete data flow from UI to database.</p>
                <div id="serviceDiagram" class="diagram-canvas"></div>

                <h3>📊 End-to-End Data Flow</h3>
                <div id="dataFlowDiagram" class="diagram-canvas small"></div>
            </div>

            <div id="data-dictionary" class="tab-pane">
                <div class="page-header">
                    <h1>📋 Data Dictionary</h1>
                    <div class="page-underline"></div>
                </div>
                <p class="page-description">Complete reference for all fields, their types, control mechanisms, and security policies.</p>

                <div class="dict-controls">
                    <input type="search" id="dictSearch" placeholder="🔍 Search fields (e.g., slug, createdAt, role)" class="search-input" />
                    <select id="dictControlFilter" class="filter-select">
                        <option value="">All Control Types</option>
                        <option value="user">🔵 User Editable</option>
                        <option value="system">🔴 System Generated</option>
                        <option value="admin">🟡 Admin Only</option>
                        <option value="computed">🟢 Computed</option>
                    </select>
                </div>

                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Field Name</th>
                                <th>Data Type</th>
                                <th>Control Type</th>
                                <th>Purpose</th>
                                <th>Used In</th>
                                <th>Validation</th>
                                <th>Security</th>
                            </tr>
                        </thead>
                        <tbody id="dictBody"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="js/architecture-data.js"></script>
    <script src="js/dto-flow-diagram.js"></script>
    <script src="js/service-flow-diagram.js"></script>
    <script src="js/data-flow-diagram.js"></script>
    <script src="js/data-dictionary.js"></script>
    <script>
        // Tab functionality
        const navItems = document.querySelectorAll('.nav-item');
        const quickNavItems = document.querySelectorAll('.quick-nav-item');
        const panes = document.querySelectorAll('.tab-pane');

        function showTab(id) {
            navItems.forEach(item => item.classList.toggle('active', item.dataset.tab === id));
            panes.forEach(pane => pane.classList.toggle('active', pane.id === id));

            // Initialize diagrams on demand
            if (id === 'dto-flow' && window.renderDtoDiagram) renderDtoDiagram();
            if (id === 'services' && window.renderServiceDiagram) {
                renderServiceDiagram();
                if (window.renderDataFlowDiagram) renderDataFlowDiagram();
            }
            if (id === 'data-dictionary' && window.renderDataDictionary) renderDataDictionary();
        }

        navItems.forEach(item => item.addEventListener('click', () => showTab(item.dataset.tab)));
        quickNavItems.forEach(item => item.addEventListener('click', () => showTab(item.dataset.tab)));
    </script>
</body>
</html>
