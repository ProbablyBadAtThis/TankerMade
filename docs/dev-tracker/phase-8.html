<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 1: Foundation - TankerMade Dev Tracker</title>

    <!-- Preload resources -->
    <link rel="preload" href="shared.css" as="style">
    <link rel="preload" href="shared.js" as="script">

    <!-- Prevent FOUC -->
    <style>
        body {
            opacity: 0;
            transition: opacity 0.15s ease-in;
        }

            body.loaded {
                opacity: 1;
            }
    </style>

    <link rel="stylesheet" href="shared.css">
    <script src="shared.js" defer></script>
</head>
<body>
    <!-- Header and nav will be injected here by JavaScript -->
    <div id="header-nav-placeholder"></div>

    <main>
        <div class="container">
            <h1>Module System Phase</h1>
            
            <div class="phase-intro">
                <div class="phase-meta">
                    <div class="meta-item">
                        <span class="meta-label">Duration:</span>
                        <span class="meta-value">Weeks 16-17</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Total Tasks:</span>
                        <span class="meta-value" id="total-tasks">35</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Estimated Time:</span>
                        <span class="meta-value">60-80 hours</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Complexity:</span>
                        <span class="meta-value">Very High (Architecture)</span>
                    </div>
                </div>
                
                <div class="phase-goal">
                    <strong>Goal:</strong> Extensible architecture with working Crochet module
                </div>
                
                <p><strong>What you'll build:</strong> A complete module system that allows craft-specific extensions. Modules can add custom UI components, API endpoints, services, and data fields. The first module (Crochet) proves the system works by adding hook size selectors, gauge calculators, and crochet-specific features.</p>
            </div>

            <div class="controls">
                <button class="btn success" onclick="markAllComplete()">‚úì Mark All Complete</button>
                <button class="btn" onclick="markAllIncomplete()">‚óã Mark All Incomplete</button>
                <button class="btn" onclick="exportPhaseProgress()">üìÅ Export Progress</button>
                <button class="btn danger" onclick="resetPhaseProgress()">üîÑ Reset Phase</button>
            </div>

            <div class="deliverable-section">
                <div class="deliverable-header">
                    <h2 class="deliverable-title">Module Infrastructure</h2>
                    <div class="deliverable-progress" id="infrastructure-progress">0 / 15 tasks</div>
                </div>
                <div class="deliverable-content">
                    <div class="task-group">
                        <div class="task-group-title">Core Interfaces</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="define-imodule-interface">
                            <div class="task-content">
                                <div class="task-title">Define IModule interface</div>
                                <div class="task-description">Name, Version, Description, RegisterServices, RegisterApiRoutes, GetComponentExtensions</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-extension-point-interface">
                            <div class="task-content">
                                <div class="task-title">Create IExtensionPoint interface</div>
                                <div class="task-description">Contract for where modules can inject components</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="design-module-data-strategy">
                            <div class="task-content">
                                <div class="task-title">Design module data storage strategy</div>
                                <div class="task-description">JSON columns in Project/Pattern for flexible module data</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-module-base-class">
                            <div class="task-content">
                                <div class="task-title">Create ModuleBase abstract class</div>
                                <div class="task-description">Base implementation with common functionality for modules</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>

                    <div class="task-group">
                        <div class="task-group-title">Module Discovery & Registration</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-module-registry">
                            <div class="task-content">
                                <div class="task-title">Create ModuleRegistry service</div>
                                <div class="task-description">Discovers modules at startup, manages lifecycle</div>
                            </div>
                            <div class="task-complexity complexity-hard">Hard</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-assembly-scanning">
                            <div class="task-content">
                                <div class="task-title">Implement assembly scanning</div>
                                <div class="task-description">Scan loaded assemblies for IModule implementations</div>
                            </div>
                            <div class="task-complexity complexity-hard">Hard</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-module-registration-hooks">
                            <div class="task-content">
                                <div class="task-title">Add module registration to startup</div>
                                <div class="task-description">Call RegisterServices and RegisterApiRoutes during app startup</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="handle-module-load-errors">
                            <div class="task-content">
                                <div class="task-title">Handle module loading errors gracefully</div>
                                <div class="task-description">App continues to work if module fails to load, log errors</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>
                    </div>

                    <div class="task-group">
                        <div class="task-group-title">Dynamic Component System</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-extension-point-component">
                            <div class="task-content">
                                <div class="task-title">Create ExtensionPoint component</div>
                                <div class="task-description">Blazor component that renders module components at extension points</div>
                            </div>
                            <div class="task-complexity complexity-hard">Hard</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-dynamic-component-renderer">
                            <div class="task-content">
                                <div class="task-title">Implement DynamicComponent renderer</div>
                                <div class="task-description">Render components by Type with parameter passing</div>
                            </div>
                            <div class="task-complexity complexity-hard">Hard</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="define-extension-points">
                            <div class="task-content">
                                <div class="task-title">Define core extension points</div>
                                <div class="task-description">ProjectDetail.AfterInfo, ProjectCreate.CustomFields, PatternCreate.CustomFields, etc.</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-extension-points-to-ui">
                            <div class="task-content">
                                <div class="task-title">Add extension points to existing UI</div>
                                <div class="task-description">Place <ExtensionPoint> components in project/pattern pages</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-parameter-passing">
                            <div class="task-content">
                                <div class="task-title">Implement parameter passing to module components</div>
                                <div class="task-description">Pass context data (Project, Pattern, etc.) to extension components</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="test-dynamic-rendering">
                            <div class="task-content">
                                <div class="task-title">Test dynamic component rendering</div>
                                <div class="task-description">Verify components render correctly with proper parameters</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="deliverable-section">
                <div class="deliverable-header">
                    <h2 class="deliverable-title">Module Data System</h2>
                    <div class="deliverable-progress" id="data-progress">0 / 8 tasks</div>
                </div>
                <div class="deliverable-content">
                    <div class="task-group">
                        <div class="task-group-title">JSON Column Implementation</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-moduledata-columns">
                            <div class="task-content">
                                <div class="task-title">Add ModuleData columns to entities</div>
                                <div class="task-description">JSON columns on Project, Pattern, InventoryItem for module-specific data</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="configure-json-serialization">
                            <div class="task-content">
                                <div class="task-title">Configure JSON serialization</div>
                                <div class="task-description">EF Core JSON column configuration, serializer settings</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-module-data-helpers">
                            <div class="task-content">
                                <div class="task-title">Create module data helper methods</div>
                                <div class="task-description">Extension methods: GetModuleData<T>, SetModuleData<T></div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-moduledata-to-dtos">
                            <div class="task-content">
                                <div class="task-title">Add ModuleData to DTOs</div>
                                <div class="task-description">Include in ProjectDto, PatternDto for API serialization</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>

                    <div class="task-group">
                        <div class="task-group-title">Module Data Migration</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-moduledata-migration">
                            <div class="task-content">
                                <div class="task-title">Create ModuleData migration</div>
                                <div class="task-description">EF Core migration to add JSON columns to existing tables</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="test-json-storage">
                            <div class="task-content">
                                <div class="task-title">Test JSON data storage</div>
                                <div class="task-description">Verify JSON serialization/deserialization works correctly</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="handle-null-module-data">
                            <div class="task-content">
                                <div class="task-title">Handle null/empty module data</div>
                                <div class="task-description">Graceful handling when no module data exists</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="validate-module-data-size">
                            <div class="task-content">
                                <div class="task-title">Add module data size validation</div>
                                <div class="task-description">Prevent extremely large JSON objects, set reasonable limits</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="deliverable-section">
                <div class="deliverable-header">
                    <h2 class="deliverable-title">Crochet Module Implementation</h2>
                    <div class="deliverable-progress" id="crochet-progress">0 / 12 tasks</div>
                </div>
                <div class="deliverable-content">
                    <div class="task-group">
                        <div class="task-group-title">Module Structure</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-crochet-module-project">
                            <div class="task-content">
                                <div class="task-title">Create TankerMade.Modules.Crochet project</div>
                                <div class="task-description">New class library project with module structure</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-crochet-module">
                            <div class="task-content">
                                <div class="task-title">Implement CrochetModule class</div>
                                <div class="task-description">Implement IModule interface with crochet-specific functionality</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="define-crochet-data-models">
                            <div class="task-content">
                                <div class="task-title">Define crochet data models</div>
                                <div class="task-description">CrochetProjectData, CrochetPatternData with hook sizes, gauge, etc.</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="register-crochet-services">
                            <div class="task-content">
                                <div class="task-title">Register crochet-specific services</div>
                                <div class="task-description">IHookSizeService, IGaugeCalculatorService in RegisterServices</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>

                    <div class="task-group">
                        <div class="task-group-title">Hook Size Components</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-hook-size-selector">
                            <div class="task-content">
                                <div class="task-title">Create hook size selector component</div>
                                <div class="task-description">Dropdown with US/UK/metric hook sizes, conversion display</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-hook-size-service">
                            <div class="task-content">
                                <div class="task-title">Implement hook size service</div>
                                <div class="task-description">Convert between size systems, validate sizes, suggest range</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-hook-size-to-project">
                            <div class="task-content">
                                <div class="task-title">Add hook size to project creation</div>
                                <div class="task-description">Hook size selector in project wizard extension point</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="show-hook-size-on-project">
                            <div class="task-content">
                                <div class="task-title">Display hook size on project detail</div>
                                <div class="task-description">Show selected hook size with conversion information</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>
                    </div>

                    <div class="task-group">
                        <div class="task-group-title">Gauge Calculator</div>
                        
                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="create-gauge-calculator-component">
                            <div class="task-content">
                                <div class="task-title">Create gauge calculator component</div>
                                <div class="task-description">Input stitches/rows per measurement unit, calculate total stitches</div>
                            </div>
                            <div class="task-complexity complexity-hard">Hard</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="implement-gauge-math">
                            <div class="task-content">
                                <div class="task-title">Implement gauge calculation logic</div>
                                <div class="task-description">Convert gauge to project dimensions, estimate stitch counts</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="add-gauge-to-patterns">
                            <div class="task-content">
                                <div class="task-title">Add gauge fields to pattern creation</div>
                                <div class="task-description">Pattern wizard extension point for recommended gauge</div>
                            </div>
                            <div class="task-complexity complexity-easy">Easy</div>
                        </div>

                        <div class="task-item">
                            <input type="checkbox" class="task-checkbox" data-task="test-crochet-module-integration">
                            <div class="task-content">
                                <div class="task-title">Test complete crochet module integration</div>
                                <div class="task-description">Verify all components load, data saves, extension points work</div>
                            </div>
                            <div class="task-complexity complexity-medium">Medium</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="acceptance-criteria">
                <h3>‚úÖ Acceptance Criteria</h3>
                <ul class="criteria-list">
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="modules-discovered-automatically">
                        <div class="criteria-text">Modules are discovered automatically at startup</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="module-services-register">
                        <div class="criteria-text">Module services register correctly in DI container</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="module-api-routes-work">
                        <div class="criteria-text">Module API routes work and are accessible</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="extension-points-inject">
                        <div class="criteria-text">Module components inject at extension points correctly</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="crochet-hook-selector">
                        <div class="criteria-text">Crochet module adds hook size selector to project creation</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="gauge-calculator-works">
                        <div class="criteria-text">Gauge calculator works and saves to project</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="module-data-persists">
                        <div class="criteria-text">Module data persists correctly in JSON columns</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="module-disable-safe">
                        <div class="criteria-text">Module can be disabled without breaking app</div>
                    </li>
                    <li class="criteria-item">
                        <input type="checkbox" class="criteria-checkbox" data-criteria="module-documentation">
                        <div class="criteria-text">Module development guide is documented</div>
                    </li>
                </ul>
            </div>
        </div>
    </main>

        <script src="shared.js"></script>
    <script>
        initializePhaseTracker({
            phaseNumber: 8,
            phaseTitle: "Notifications & Reminders",
            taskIds: [
                "create-notification-entities", "create-notification-dtos", "create-notification-services",
                "implement-notification-system", "create-notification-center", "add-notification-preferences",
                "implement-notification-scheduling", "create-reminder-system",
                "add-reminder-frequency", "implement-reminder-snooze",
                "create-notification-channels", "add-email-notifications",
                "implement-push-notifications", "create-in-app-notifications",
                "add-notification-grouping", "implement-notification-priority",
                "create-notification-history", "add-notification-read-status",
                "implement-notification-actions", "create-notification-templates",
                "add-notification-filters", "implement-notification-muting",
                "create-notification-sync", "add-offline-notification-queue",
                "implement-notification-retry", "create-notification-analytics",
                "add-notification-testing", "implement-notification-debugging"
            ],
            criteriaIds: [
                "notifications-deliver-reliably", "reminders-trigger-accurately", "notification-preferences-respected",
                "push-notifications-work", "notification-history-accessible"
            ]
        });

    </script>
</body>
</html>
